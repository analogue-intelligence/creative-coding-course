<!DOCTYPE html>
<html lang="en">
      <head>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js"></script>
            <script src="https://unpkg.com/p5.js-svg@1.5.1"></script>

            <link rel="stylesheet" href="../../assets/main.css">
            <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,700" rel="stylesheet">
            <script src="//toolness.github.io/p5.js-widget/p5-widget.js"></script>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-M53C4CJQXG"></script>
            <script>
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){dataLayer.push(arguments);}
                  gtag('js', new Date());

                  gtag('config', 'G-M53C4CJQXG');
            </script>

            <!-- Adding libraries -->
            <script src="libraries/CCapture.js"></script>
            <script src="libraries/webm-writer-0.2.0.js.js"></script>
            <script src="libraries/download.js"></script>

            <!-- Creating CCapture object -->
            <script>
                  var capturer = new CCapture({
                  format: 'webm', //Output of capture - in this case webm
                  framerate: 60,  //Defining framerate
                  verbose: true   //By setting verbose to true you can see the process in the console
                  })
            </script>

            <style>
                  .highlighted {
                  background-color: yellow;
                  font-weight: bold;
                  }
            </style>
      </head>
      <body>
            <header>
                  <h1><a href="../../index.html" class="title">Summer school - Creative Coding</a></h1>
            </header>
            <h2>Session 9</h2>

            <h2>7.1 Exporting Images</h2>

            <p>We will be using an example project to showcase how the program changes depending on the export method. The changes that are made will be highlighted.</p>

            <div>
                  <h3>Exporting Images</h3>
                  <ol>
                        <li>Create a <code>keyPressed()</code> event so that when the 's' key is pressed. </li>
                        <li>The image is saved using the <code>save()</code> function within the <code>keyPressed()</code> event.</li>
                  </ol>
                  <div>
                        <pre><code>
                              // Theo van Doesburg - Composition VII , 1917 

                              // I get colors with the color picker
                              // https://color.adobe.com/create/image
                              const COLOR_BG = "#191726";
                              const COLOR_RED = "#8C251C";
                              const COLOR_BLUE = "#203C73";
                              const COLOR_YELLOW = "#D9B777";
                              const COLOR_WHITE = "#E7E2CC";
                              
                              const NUM_BLOCKS = 22;
                              let PIX_BLOCK;
                              
                              let motion_type_sync = false;
                              
                              let shapes = [
                                  { id: 0, x: 0.2, y: 9.8, w: 1.4, h: 6.5, c: COLOR_WHITE },
                                  { id: 1, x: 1.9, y: 18.9, w: 4.3, h: 1.1, c: COLOR_RED },
                                  { id: 2, x: 1.95, y: 5.1, w: 1.2, h: 3.8, c: COLOR_YELLOW },
                                  { id: 3, x: 2.5, y: 11, w: 1, h: 3.8, c: COLOR_YELLOW },
                                  { id: 4, x: 2.5, y: 16, w: 5.9, h: 1.2, c: COLOR_BLUE },
                                  { id: 5, x: 3.6, y: 1.2, w: 1.5, h: 1.8, c: COLOR_BLUE },
                                  { id: 6, x: 3.8, y: 7.5, w: 3, h: 1.1, c: COLOR_WHITE },
                                  { id: 7, x: 5, y: 10, w: 0.9, h: 1.2, c: COLOR_BLUE },
                                  { id: 8, x: 5.1, y: 14, w: 2, h: 0.9, c: COLOR_RED },
                                  { id: 9, x: 5.1, y: 4, w: 1, h: 2.1, c: COLOR_RED },
                                  { id: 10, x: 7.2, y: 6.2, w: 1.2, h: 7.1, c: COLOR_WHITE },
                                  { id: 11, x: 7.2, y: 2.9, w: 1.7, h: 1.1, c: COLOR_WHITE },
                                  { id: 12, x: 9.1, y: 12.6, w: 1.8, h: 1.9, c: COLOR_YELLOW },
                                  { id: 13, x: 9.1, y: 19, w: 7.1, h: 1.3, c: COLOR_WHITE },
                                  { id: 14, x: 10.6, y: 4.3, w: 1.1, h: 4.5, c: COLOR_YELLOW },
                                  { id: 15, x: 11, y: 9.9, w: 5, h: 1.1, c: COLOR_WHITE },
                                  { id: 16, x: 11.6, y: 12, w: 1.7, h: 1.8, c: COLOR_BLUE },
                                  { id: 17, x: 12.8, y: 14.5, w: 1.7, h: 3.5, c: COLOR_RED },
                                  { id: 18, x: 13.1, y: 6.6, w: 2, h: 0.9, c: COLOR_RED },
                                  { id: 19, x: 13.6, y: 3.1, w: 1, h: 2.5, c: COLOR_BLUE },
                                  { id: 20, x: 15.2, y: 1, w: 1.6, h: 1.9, c: COLOR_RED },
                                  { id: 21, x: 16, y: 11.5, w: 1.1, h: 3, c: COLOR_WHITE },
                                  { id: 22, x: 17, y: 4, w: 1.1, h: 4.8, c: COLOR_YELLOW },
                                  { id: 23, x: 18.2, y: 11, w: 0.8, h: 4.6, c: COLOR_BLUE },
                                  { id: 24, x: 19.2, y: 16.1, w: 1.1, h: 6, c: COLOR_YELLOW },
                                  { id: 25, x: 19.3, y: 7.6, w: 2.3, h: 1.1, c: COLOR_WHITE },
                                  { id: 26, x: 19.6, y: 12, w: 2.1, h: 1.1, c: COLOR_RED },
                                  { id: 27, x: 20.5, y: 0.8, w: 1, h: 5.7, c: COLOR_BLUE },
                              ];
                              
                              
                              function setup() {
                                  createCanvas(400, 400);
                                  PIX_BLOCK = width / NUM_BLOCKS;
                              
                                  // Add variables required for motion
                                  shapes = shapes.map(d => {
                                      d.x *= PIX_BLOCK;
                                      d.y *= PIX_BLOCK;
                                      d.w *= PIX_BLOCK;
                                      d.h *= PIX_BLOCK;
                                      d.curr_x = d.x;
                                      d.curr_y = d.y;
                                      d.curr_w = d.w;
                                      d.curr_h = d.h;
                                      d.motion_dir = 1;  // direction in which we change the factor/increment, we start by expanding
                                      d.selected = false;
                                      d.inc = 0.1;  // inc speed
                                      d.extra_area_allowed = 0.2;
                                      return d;
                                  });
                              
                                  monoSynth = new p5.MonoSynth();
                              }
                              
                              function draw() {
                                  background(COLOR_BG);
                              
                                  // General rendering settings 
                                  noStroke();
                              
                                  let current_area = 0;
                              
                                  shapes.forEach(d => {
                              
                                      if (d.selected) {
                              
                                      } else {
                                          d.curr_x = d.curr_x + -1 * d.motion_dir * d.inc / 2;
                                          d.curr_y = d.curr_y + -1 * d.motion_dir * d.inc / 2;
                                          d.curr_w = d.curr_w + d.motion_dir * d.inc;
                                          d.curr_h = d.curr_h + d.motion_dir * d.inc;
                              
                                          fill(d.c);
                                          rect(d.curr_x, d.curr_y, d.curr_w, d.curr_h);
                              
                                          current_area = d.curr_w * d.curr_h;
                              
                                          if (current_area >= (d.w * d.h) * (1 + d.extra_area_allowed)) {
                                              d.motion_dir = -1;
                                          } else if (current_area <= (d.w * d.h) * (1 - d.extra_area_allowed)) {
                                              d.motion_dir = 1;
                                          }
                                      }
                              
                                  }
                                  );
                              
                                  <span class="highlighted">
                                    //Saving the canvas
                                    if (keyIsPressed && key === 's') {
                                          saveCanvas('myArtwork', 'jpg');
                                    }
                                  </span>
                                  
                              }
                              
                              function mouseClicked() {
                                  console.log(mouseX, mouseY);
                                  check_shapes_contain_click(mouseX, mouseY);
                                  playSynth();
                              }
                              
                              function check_shapes_contain_click(x_coord, y_coord) {
                                  shapes.forEach(d => {
                                      let contained_in_x = d.x <= x_coord && x_coord <= d.x + d.w;
                                      let contained_in_y = d.y <= y_coord && y_coord <= d.y + d.h;
                                      if (contained_in_x && contained_in_y) {
                                          console.log("Shape " + d.id + " contains coord " + [contained_in_x, contained_in_y]);
                                          d.extra_area_allowed = 0.4;
                                          d.inc = 1;
                                      }
                                  });
                              }
                              
                              function playSynth() {
                                  userStartAudio();
                              
                                  let note = random(['Fb4', 'G4']);
                                  // note velocity (volume, from 0 to 1)
                                  let velocity = random();
                                  // time from now (in seconds)
                                  let time = 0;
                                  // note duration (in seconds)
                                  let dur = 1 / 6;
                              
                                  monoSynth.play(note, velocity, time, dur);
                              }
                        </code></pre>
                  </div>
                  <p>Note that the <code>saveCanvas()</code> function is only able to save files as 'png' or 'jpg'.</p>
            </div>

            <div>
                  <h3>Exporting High-Resolution Images</h3>
                  <ol>
                    <li>Use the <code>pixelDensity()</code> function in the <code>setup()</code> function. If an argument greater than 1 is passed to the function, the resolution increases without changing the canvas size.</li>
                    <li>Create a <code>keyPressed()</code> event so that when the 's' key is pressed, the current image is saved using the <code>save()</code> function.</li>
                    <li>Refer to the <a href="https://p5js.org/reference/#/p5/save">save() function documentation</a> for more information. Note that you can save the canvas, an image, CSV, WAV, HTML, text, and HTML file using this function.</li>
                  </ol>
                  <pre><code>
                        // Theo van Doesburg - Composition VII , 1917 

                        // I get colors with the color picker
                        // https://color.adobe.com/create/image
                        const COLOR_BG = "#191726";
                        const COLOR_RED = "#8C251C";
                        const COLOR_BLUE = "#203C73";
                        const COLOR_YELLOW = "#D9B777";
                        const COLOR_WHITE = "#E7E2CC";
                        
                        const NUM_BLOCKS = 22;
                        let PIX_BLOCK;
                        
                        let motion_type_sync = false;
                        
                        let shapes = [
                            { id: 0, x: 0.2, y: 9.8, w: 1.4, h: 6.5, c: COLOR_WHITE },
                            { id: 1, x: 1.9, y: 18.9, w: 4.3, h: 1.1, c: COLOR_RED },
                            { id: 2, x: 1.95, y: 5.1, w: 1.2, h: 3.8, c: COLOR_YELLOW },
                            { id: 3, x: 2.5, y: 11, w: 1, h: 3.8, c: COLOR_YELLOW },
                            { id: 4, x: 2.5, y: 16, w: 5.9, h: 1.2, c: COLOR_BLUE },
                            { id: 5, x: 3.6, y: 1.2, w: 1.5, h: 1.8, c: COLOR_BLUE },
                            { id: 6, x: 3.8, y: 7.5, w: 3, h: 1.1, c: COLOR_WHITE },
                            { id: 7, x: 5, y: 10, w: 0.9, h: 1.2, c: COLOR_BLUE },
                            { id: 8, x: 5.1, y: 14, w: 2, h: 0.9, c: COLOR_RED },
                            { id: 9, x: 5.1, y: 4, w: 1, h: 2.1, c: COLOR_RED },
                            { id: 10, x: 7.2, y: 6.2, w: 1.2, h: 7.1, c: COLOR_WHITE },
                            { id: 11, x: 7.2, y: 2.9, w: 1.7, h: 1.1, c: COLOR_WHITE },
                            { id: 12, x: 9.1, y: 12.6, w: 1.8, h: 1.9, c: COLOR_YELLOW },
                            { id: 13, x: 9.1, y: 19, w: 7.1, h: 1.3, c: COLOR_WHITE },
                            { id: 14, x: 10.6, y: 4.3, w: 1.1, h: 4.5, c: COLOR_YELLOW },
                            { id: 15, x: 11, y: 9.9, w: 5, h: 1.1, c: COLOR_WHITE },
                            { id: 16, x: 11.6, y: 12, w: 1.7, h: 1.8, c: COLOR_BLUE },
                            { id: 17, x: 12.8, y: 14.5, w: 1.7, h: 3.5, c: COLOR_RED },
                            { id: 18, x: 13.1, y: 6.6, w: 2, h: 0.9, c: COLOR_RED },
                            { id: 19, x: 13.6, y: 3.1, w: 1, h: 2.5, c: COLOR_BLUE },
                            { id: 20, x: 15.2, y: 1, w: 1.6, h: 1.9, c: COLOR_RED },
                            { id: 21, x: 16, y: 11.5, w: 1.1, h: 3, c: COLOR_WHITE },
                            { id: 22, x: 17, y: 4, w: 1.1, h: 4.8, c: COLOR_YELLOW },
                            { id: 23, x: 18.2, y: 11, w: 0.8, h: 4.6, c: COLOR_BLUE },
                            { id: 24, x: 19.2, y: 16.1, w: 1.1, h: 6, c: COLOR_YELLOW },
                            { id: 25, x: 19.3, y: 7.6, w: 2.3, h: 1.1, c: COLOR_WHITE },
                            { id: 26, x: 19.6, y: 12, w: 2.1, h: 1.1, c: COLOR_RED },
                            { id: 27, x: 20.5, y: 0.8, w: 1, h: 5.7, c: COLOR_BLUE },
                        ];
                        
                        
                        function setup() {
                            createCanvas(400, 400);
                              
                            <span class="highlighted">
                              //Raising the pixel density here
                              pixelDensity(9);  
                            </span>
                            
                            PIX_BLOCK = width / NUM_BLOCKS;
                        
                            // Add variables required for motion
                            shapes = shapes.map(d => {
                                d.x *= PIX_BLOCK;
                                d.y *= PIX_BLOCK;
                                d.w *= PIX_BLOCK;
                                d.h *= PIX_BLOCK;
                                d.curr_x = d.x;
                                d.curr_y = d.y;
                                d.curr_w = d.w;
                                d.curr_h = d.h;
                                d.motion_dir = 1;  // direction in which we change the factor/increment, we start by expanding
                                d.selected = false;
                                d.inc = 0.1;  // inc speed
                                d.extra_area_allowed = 0.2;
                                return d;
                            });
                        
                            monoSynth = new p5.MonoSynth();
                        }
                        
                        function draw() {
                            background(COLOR_BG);
                        
                            // General rendering settings 
                            noStroke();
                        
                            let current_area = 0;
                        
                            shapes.forEach(d => {
                        
                                if (d.selected) {
                        
                                } else {
                                    d.curr_x = d.curr_x + -1 * d.motion_dir * d.inc / 2;
                                    d.curr_y = d.curr_y + -1 * d.motion_dir * d.inc / 2;
                                    d.curr_w = d.curr_w + d.motion_dir * d.inc;
                                    d.curr_h = d.curr_h + d.motion_dir * d.inc;
                        
                                    fill(d.c);
                                    rect(d.curr_x, d.curr_y, d.curr_w, d.curr_h);
                        
                                    current_area = d.curr_w * d.curr_h;
                        
                                    if (current_area >= (d.w * d.h) * (1 + d.extra_area_allowed)) {
                                        d.motion_dir = -1;
                                    } else if (current_area <= (d.w * d.h) * (1 - d.extra_area_allowed)) {
                                        d.motion_dir = 1;
                                    }
                                }
                        
                            }
                            );
                        
                            <span class="highlighted">
                              //Saving the canvas
                              if (keyIsPressed && key === 's') {
                                  saveCanvas('myArtwork', 'jpg');
                              }
                            </span>
                        }
                        
                        function mouseClicked() {
                            console.log(mouseX, mouseY);
                            check_shapes_contain_click(mouseX, mouseY);
                            playSynth();
                        }
                        
                        function check_shapes_contain_click(x_coord, y_coord) {
                            shapes.forEach(d => {
                                let contained_in_x = d.x <= x_coord && x_coord <= d.x + d.w;
                                let contained_in_y = d.y <= y_coord && y_coord <= d.y + d.h;
                                if (contained_in_x && contained_in_y) {
                                    console.log("Shape " + d.id + " contains coord " + [contained_in_x, contained_in_y]);
                                    d.extra_area_allowed = 0.4;
                                    d.inc = 1;
                                }
                            });
                        }
                        
                        function playSynth() {
                            userStartAudio();
                        
                            let note = random(['Fb4', 'G4']);
                            // note velocity (volume, from 0 to 1)
                            let velocity = random();
                            // time from now (in seconds)
                            let time = 0;
                            // note duration (in seconds)
                            let dur = 1 / 6;
                        
                            monoSynth.play(note, velocity, time, dur);
                        }
                  </code></pre>
                  <p>Note that this method doesn't work together with editing pixels individually using <code>loadPixels()</code>.</p>
            </div>

            <div>
                  <h3>Exporting SVG</h3>
                  <ol>
                        <li>Add this line in your project's index.html file: <code>&lt;script src="https://unpkg.com/p5.js-svg@1.5.1"&gt;&lt;/script&gt;</code></li>
                        <li>When creating a canvas in your sketch, add 'SVG' as the third argument - <code>createCanvas(100, 100, SVG)</code>.</li>
                        <li>Export the image using the <code>save()</code> function and end the file name with '.svg'.</li>
                  </ol>
                  <pre><code>
                        // Theo van Doesburg - Composition VII , 1917 

                        // I get colors with the color picker
                        // https://color.adobe.com/create/image
                        const COLOR_BG = "#191726";
                        const COLOR_RED = "#8C251C";
                        const COLOR_BLUE = "#203C73";
                        const COLOR_YELLOW = "#D9B777";
                        const COLOR_WHITE = "#E7E2CC";
                        
                        const NUM_BLOCKS = 22;
                        let PIX_BLOCK;
                        
                        let motion_type_sync = false;
                        
                        let shapes = [
                            { id: 0, x: 0.2, y: 9.8, w: 1.4, h: 6.5, c: COLOR_WHITE },
                            { id: 1, x: 1.9, y: 18.9, w: 4.3, h: 1.1, c: COLOR_RED },
                            { id: 2, x: 1.95, y: 5.1, w: 1.2, h: 3.8, c: COLOR_YELLOW },
                            { id: 3, x: 2.5, y: 11, w: 1, h: 3.8, c: COLOR_YELLOW },
                            { id: 4, x: 2.5, y: 16, w: 5.9, h: 1.2, c: COLOR_BLUE },
                            { id: 5, x: 3.6, y: 1.2, w: 1.5, h: 1.8, c: COLOR_BLUE },
                            { id: 6, x: 3.8, y: 7.5, w: 3, h: 1.1, c: COLOR_WHITE },
                            { id: 7, x: 5, y: 10, w: 0.9, h: 1.2, c: COLOR_BLUE },
                            { id: 8, x: 5.1, y: 14, w: 2, h: 0.9, c: COLOR_RED },
                            { id: 9, x: 5.1, y: 4, w: 1, h: 2.1, c: COLOR_RED },
                            { id: 10, x: 7.2, y: 6.2, w: 1.2, h: 7.1, c: COLOR_WHITE },
                            { id: 11, x: 7.2, y: 2.9, w: 1.7, h: 1.1, c: COLOR_WHITE },
                            { id: 12, x: 9.1, y: 12.6, w: 1.8, h: 1.9, c: COLOR_YELLOW },
                            { id: 13, x: 9.1, y: 19, w: 7.1, h: 1.3, c: COLOR_WHITE },
                            { id: 14, x: 10.6, y: 4.3, w: 1.1, h: 4.5, c: COLOR_YELLOW },
                            { id: 15, x: 11, y: 9.9, w: 5, h: 1.1, c: COLOR_WHITE },
                            { id: 16, x: 11.6, y: 12, w: 1.7, h: 1.8, c: COLOR_BLUE },
                            { id: 17, x: 12.8, y: 14.5, w: 1.7, h: 3.5, c: COLOR_RED },
                            { id: 18, x: 13.1, y: 6.6, w: 2, h: 0.9, c: COLOR_RED },
                            { id: 19, x: 13.6, y: 3.1, w: 1, h: 2.5, c: COLOR_BLUE },
                            { id: 20, x: 15.2, y: 1, w: 1.6, h: 1.9, c: COLOR_RED },
                            { id: 21, x: 16, y: 11.5, w: 1.1, h: 3, c: COLOR_WHITE },
                            { id: 22, x: 17, y: 4, w: 1.1, h: 4.8, c: COLOR_YELLOW },
                            { id: 23, x: 18.2, y: 11, w: 0.8, h: 4.6, c: COLOR_BLUE },
                            { id: 24, x: 19.2, y: 16.1, w: 1.1, h: 6, c: COLOR_YELLOW },
                            { id: 25, x: 19.3, y: 7.6, w: 2.3, h: 1.1, c: COLOR_WHITE },
                            { id: 26, x: 19.6, y: 12, w: 2.1, h: 1.1, c: COLOR_RED },
                            { id: 27, x: 20.5, y: 0.8, w: 1, h: 5.7, c: COLOR_BLUE },
                        ];
                        
                        
                        function setup() {
                        
                            <span class="highlighted">
                              //Specify SVG when creating canvas
                            createCanvas(400, 400, SVG);
                            </span>
                            
                            PIX_BLOCK = width / NUM_BLOCKS;
                        
                            // Add variables required for motion
                            shapes = shapes.map(d => {
                                d.x *= PIX_BLOCK;
                                d.y *= PIX_BLOCK;
                                d.w *= PIX_BLOCK;
                                d.h *= PIX_BLOCK;
                                d.curr_x = d.x;
                                d.curr_y = d.y;
                                d.curr_w = d.w;
                                d.curr_h = d.h;
                                d.motion_dir = 1;  // direction in which we change the factor/increment, we start by expanding
                                d.selected = false;
                                d.inc = 0.1;  // inc speed
                                d.extra_area_allowed = 0.2;
                                return d;
                            });
                        
                            monoSynth = new p5.MonoSynth();
                        }
                        
                        function draw() {
                            background(COLOR_BG);
                        
                            // General rendering settings 
                            noStroke();
                        
                            let current_area = 0;
                        
                            shapes.forEach(d => {
                        
                                if (d.selected) {
                        
                                } else {
                                    d.curr_x = d.curr_x + -1 * d.motion_dir * d.inc / 2;
                                    d.curr_y = d.curr_y + -1 * d.motion_dir * d.inc / 2;
                                    d.curr_w = d.curr_w + d.motion_dir * d.inc;
                                    d.curr_h = d.curr_h + d.motion_dir * d.inc;
                        
                                    fill(d.c);
                                    rect(d.curr_x, d.curr_y, d.curr_w, d.curr_h);
                        
                                    current_area = d.curr_w * d.curr_h;
                        
                                    if (current_area >= (d.w * d.h) * (1 + d.extra_area_allowed)) {
                                        d.motion_dir = -1;
                                    } else if (current_area <= (d.w * d.h) * (1 - d.extra_area_allowed)) {
                                        d.motion_dir = 1;
                                    }
                                }
                        
                            }
                            );

                            <span class="highlighted">
                              //Saving the canvas, the file is downloaded as an SVG
                              if (keyIsPressed && key === 's') {
                                  save('myArtwork.svg');
                              }
                            </span>
                        }
                        
                        function mouseClicked() {
                            console.log(mouseX, mouseY);
                            check_shapes_contain_click(mouseX, mouseY);
                            playSynth();
                        }
                        
                        function check_shapes_contain_click(x_coord, y_coord) {
                            shapes.forEach(d => {
                                let contained_in_x = d.x <= x_coord && x_coord <= d.x + d.w;
                                let contained_in_y = d.y <= y_coord && y_coord <= d.y + d.h;
                                if (contained_in_x && contained_in_y) {
                                    console.log("Shape " + d.id + " contains coord " + [contained_in_x, contained_in_y]);
                                    d.extra_area_allowed = 0.4;
                                    d.inc = 1;
                                }
                            });
                        }
                        
                        function playSynth() {
                            userStartAudio();
                        
                            let note = random(['Fb4', 'G4']);
                            // note velocity (volume, from 0 to 1)
                            let velocity = random();
                            // time from now (in seconds)
                            let time = 0;
                            // note duration (in seconds)
                            let dur = 1 / 6;
                        
                            monoSynth.play(note, velocity, time, dur);
                        }
                  </code></pre>
                  <!-- <script type="text/p5" src="05.js" data-autoplay></script> -->
            </div>

            <div>
                  <h3>Exporting Vector Graphics PDF</h3>
                  <p>Discover how to export your p5.js sketch as a high-resolution or vector graphics PDF in a desired format. Refer to <a href="https://stackoverflow.com/questions/23681325/convert-canvas-to-pdf">this Stack Overflow thread</a> for more information.</p>
                  <!-- <script type="text/p5" src="02.js" data-autoplay></script> -->
                  <pre><code></code></pre>
            </div>

            <h2>Exporting Videos</h2>

            <div>
                  <h3>Capturing and Exporting a Simple Animation</h3>
                  <p>
                        <ol>
                              <li>Download the <a href="https://github.com/spite/ccapture.js/">CCapture.js repository</a> from GitHub.</li>
                              <li>Add all contents of the 'src' folder in the repository to your libraries folder in the project directory.</li>
                              <li>Link the libraries in the HTML file by adding them to the index.html file. The libraries to add are 'CCapture.js', 'webm-writer-0.02.0.js', and 'download.js'.</li>
                              <pre><code>&lt;script src="path/to/CCapture.js"&gt;&lt;/script&gt;
&lt;script src="path/to/webm-writer-0.02.0.js"&gt;&lt;/script&gt;
&lt;script src="path/to/download.js"&gt;&lt;/script&gt;</code></pre>
                              <li>Create a <code>CCapture</code> object in the HTML file:</li>
                              <pre><code>&lt;script&gtvar capturer = new CCapture({ format: 'webm', framerate: 60, verbose: true});&lt;/script&gt</code></pre>
                              <li>Start the capture at the beginning of the <code>draw()</code> function when <code>frameCount == 1</code>:</li>
                              <pre><code>if (frameCount == 1) {
  capturer.start();
}</code></pre>
                              <li>During the animation, capture frames using <code>capturer.capture(canvas)</code>. Stop the capture and save the recording when <code>frameCount == 60</code>:</li>
                              <pre><code>if (frameCount < 60) {
  capturer.capture(canvas);
} else if (frameCount == 60) {
  capturer.stop();
  capturer.save();
}</code></pre>
                              <li>View the console to see the frames being recorded while the capturer is running.</li>
                        </ol>
                  </p>
                  <pre><code>
                        // Theo van Doesburg - Composition VII , 1917 

                        // I get colors with the color picker
                        // https://color.adobe.com/create/image
                        const COLOR_BG = "#191726";
                        const COLOR_RED = "#8C251C";
                        const COLOR_BLUE = "#203C73";
                        const COLOR_YELLOW = "#D9B777";
                        const COLOR_WHITE = "#E7E2CC";
                        
                        const NUM_BLOCKS = 22;
                        let PIX_BLOCK;
                        
                        let motion_type_sync = false;
                        
                        let shapes = [
                            { id: 0, x: 0.2, y: 9.8, w: 1.4, h: 6.5, c: COLOR_WHITE },
                            { id: 1, x: 1.9, y: 18.9, w: 4.3, h: 1.1, c: COLOR_RED },
                            { id: 2, x: 1.95, y: 5.1, w: 1.2, h: 3.8, c: COLOR_YELLOW },
                            { id: 3, x: 2.5, y: 11, w: 1, h: 3.8, c: COLOR_YELLOW },
                            { id: 4, x: 2.5, y: 16, w: 5.9, h: 1.2, c: COLOR_BLUE },
                            { id: 5, x: 3.6, y: 1.2, w: 1.5, h: 1.8, c: COLOR_BLUE },
                            { id: 6, x: 3.8, y: 7.5, w: 3, h: 1.1, c: COLOR_WHITE },
                            { id: 7, x: 5, y: 10, w: 0.9, h: 1.2, c: COLOR_BLUE },
                            { id: 8, x: 5.1, y: 14, w: 2, h: 0.9, c: COLOR_RED },
                            { id: 9, x: 5.1, y: 4, w: 1, h: 2.1, c: COLOR_RED },
                            { id: 10, x: 7.2, y: 6.2, w: 1.2, h: 7.1, c: COLOR_WHITE },
                            { id: 11, x: 7.2, y: 2.9, w: 1.7, h: 1.1, c: COLOR_WHITE },
                            { id: 12, x: 9.1, y: 12.6, w: 1.8, h: 1.9, c: COLOR_YELLOW },
                            { id: 13, x: 9.1, y: 19, w: 7.1, h: 1.3, c: COLOR_WHITE },
                            { id: 14, x: 10.6, y: 4.3, w: 1.1, h: 4.5, c: COLOR_YELLOW },
                            { id: 15, x: 11, y: 9.9, w: 5, h: 1.1, c: COLOR_WHITE },
                            { id: 16, x: 11.6, y: 12, w: 1.7, h: 1.8, c: COLOR_BLUE },
                            { id: 17, x: 12.8, y: 14.5, w: 1.7, h: 3.5, c: COLOR_RED },
                            { id: 18, x: 13.1, y: 6.6, w: 2, h: 0.9, c: COLOR_RED },
                            { id: 19, x: 13.6, y: 3.1, w: 1, h: 2.5, c: COLOR_BLUE },
                            { id: 20, x: 15.2, y: 1, w: 1.6, h: 1.9, c: COLOR_RED },
                            { id: 21, x: 16, y: 11.5, w: 1.1, h: 3, c: COLOR_WHITE },
                            { id: 22, x: 17, y: 4, w: 1.1, h: 4.8, c: COLOR_YELLOW },
                            { id: 23, x: 18.2, y: 11, w: 0.8, h: 4.6, c: COLOR_BLUE },
                            { id: 24, x: 19.2, y: 16.1, w: 1.1, h: 6, c: COLOR_YELLOW },
                            { id: 25, x: 19.3, y: 7.6, w: 2.3, h: 1.1, c: COLOR_WHITE },
                            { id: 26, x: 19.6, y: 12, w: 2.1, h: 1.1, c: COLOR_RED },
                            { id: 27, x: 20.5, y: 0.8, w: 1, h: 5.7, c: COLOR_BLUE },
                        ];
                        
                        
                        function setup() {
                            createCanvas(400, 400);
                            PIX_BLOCK = width / NUM_BLOCKS;
                        
                            // Add variables required for motion
                            shapes = shapes.map(d => {
                                d.x *= PIX_BLOCK;
                                d.y *= PIX_BLOCK;
                                d.w *= PIX_BLOCK;
                                d.h *= PIX_BLOCK;
                                d.curr_x = d.x;
                                d.curr_y = d.y;
                                d.curr_w = d.w;
                                d.curr_h = d.h;
                                d.motion_dir = 1;  // direction in which we change the factor/increment, we start by expanding
                                d.selected = false;
                                d.inc = 0.1;  // inc speed
                                d.extra_area_allowed = 0.2;
                                return d;
                            });
                        
                            monoSynth = new p5.MonoSynth();
                        }
                        
                        function draw() {
                        
                           <span class="highlighted">if (frameCount == 1) {
                              capturer.start();
                           }</span>
                        
                            background(COLOR_BG);
                        
                            // General rendering settings 
                            noStroke();
                        
                            let current_area = 0;
                        
                            shapes.forEach(d => {
                        
                                if (d.selected) {
                        
                                } else {
                                    d.curr_x = d.curr_x + -1 * d.motion_dir * d.inc / 2;
                                    d.curr_y = d.curr_y + -1 * d.motion_dir * d.inc / 2;
                                    d.curr_w = d.curr_w + d.motion_dir * d.inc;
                                    d.curr_h = d.curr_h + d.motion_dir * d.inc;
                        
                                    fill(d.c);
                                    rect(d.curr_x, d.curr_y, d.curr_w, d.curr_h);
                        
                                    current_area = d.curr_w * d.curr_h;
                        
                                    if (current_area >= (d.w * d.h) * (1 + d.extra_area_allowed)) {
                                        d.motion_dir = -1;
                                    } else if (current_area <= (d.w * d.h) * (1 - d.extra_area_allowed)) {
                                        d.motion_dir = 1;
                                    }
                                }
                        
                            }
                            );
                              <span class="highlighted">
                              if (frameCount < 60) {
                                    capturer.capture(canvas);
                              } else if (frameCount == 60) {
                                    capturer.stop();
                                    capturer.save();
                              }</span>
                        }
                        
                        function mouseClicked() {
                            console.log(mouseX, mouseY);
                            check_shapes_contain_click(mouseX, mouseY);
                            playSynth();
                        }
                        
                        function check_shapes_contain_click(x_coord, y_coord) {
                            shapes.forEach(d => {
                                let contained_in_x = d.x <= x_coord && x_coord <= d.x + d.w;
                                let contained_in_y = d.y <= y_coord && y_coord <= d.y + d.h;
                                if (contained_in_x && contained_in_y) {
                                    console.log("Shape " + d.id + " contains coord " + [contained_in_x, contained_in_y]);
                                    d.extra_area_allowed = 0.4;
                                    d.inc = 1;
                                }
                            });
                        }
                        
                        function playSynth() {
                            userStartAudio();
                        
                            let note = random(['Fb4', 'G4']);
                            // note velocity (volume, from 0 to 1)
                            let velocity = random();
                            // time from now (in seconds)
                            let time = 0;
                            // note duration (in seconds)
                            let dur = 1 / 6;
                        
                            monoSynth.play(note, velocity, time, dur);
                        }
                  </code></pre>
                  <br> <b class="pink">Note:</b> You do not have to use 'frameCount' to determine when to stop the animation, any variable can be used but this depends on the context of your program.
            </div>
      </body>
</html>
